:root{
  /* Palette */
  --bg: linear-gradient(135deg, rgba(255,237,240,0.6) 0%, rgba(235,248,255,0.6) 100%); /* subtle pastel gradient */
  --bg-color: #F7FBFF; /* fallback flat color for environments that don't render gradients */
  --card:#FFFFFF;
  --text:#1F2937;
  --muted:#6B7280;
  --primary:#6366F1; /* indigo */
  --correct:#22C55E;
  --wrong:#EF4444;
  --accent1:#F59E0B; /* amber */
  --accent2:#06B6D4; /* cyan */
  --soft:#EEF6FF;

  /* Pastel tints */
  --tint-primary: rgba(99,102,241,0.12);
  --tint-correct: rgba(34,197,94,0.12);
  --tint-wrong: rgba(239,68,68,0.12);

  /* Sizing (mobile-first) */
  --box: clamp(52px, 13vw, 88px);
  --gap: clamp(10px, 2.6vw, 16px);
  --digit: clamp(28px, 8vw, 52px);
  --radius: 18px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Arial;
  background: var(--bg-color);
  background-image: var(--bg);
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}
.container{
  max-width:760px;
  margin:28px auto;
  padding:22px;
  background:linear-gradient(180deg, #ffffff, #fbfcff);
  border-radius:14px;
  box-shadow:0 10px 30px rgba(2,6,23,0.08);
}
/* Mode tabs */
.mode-tabs{display:flex;gap:10px;margin:12px 0 10px}
.mode-tabs .mode-btn{padding:8px 14px;border-radius:999px;background:transparent;border:1px solid rgba(99,102,241,0.10);color:var(--muted);cursor:pointer;font-weight:600}
.mode-tabs .mode-btn.active{background:var(--primary);color:#fff;box-shadow:0 8px 20px rgba(99,102,241,0.12);border-color:transparent}

/* print-controls hidden by default; JS will toggle display based on mode */
.controls.print-controls{display:none}
header h1{margin:0 0 12px;font-size:1.4rem}
.controls .row{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  margin-bottom:12px;
}
label{font-size:0.95rem;color:var(--muted)}
select,input{padding:6px 8px;border:1px solid #e5e7eb;border-radius:6px}
button{
  background:var(--primary);
  color:white;
  border:none;
  padding:10px 14px;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
  transition:transform 120ms ease, box-shadow 120ms ease;
}
button:focus{outline:3px solid rgba(99,102,241,0.16)}
button:hover{transform:translateY(-2px)}
button.secondary{background:#6b7280}
button:disabled{opacity:0.65;cursor:not-allowed}
.quiz{margin:16px 0;padding:18px;border-radius:14px;background:linear-gradient(180deg,#fff,#fbfdff);box-shadow:inset 0 -4px 8px rgba(99,102,241,0.02)}
.status{font-size:0.95rem;color:var(--muted);margin-bottom:10px}
.question{font-weight:800;font-size:1.25rem;margin-bottom:10px;color:var(--text)}
.answer-row{display:flex;gap:12px;align-items:center}
.answer-row input{flex:1;padding:12px;font-size:1rem;border-radius:10px}
.digit-grid{display:flex;flex-direction:column;align-items:flex-end;gap:var(--gap);margin:0 auto;padding:12px;border-radius:12px;border:2px dashed rgba(2,6,23,0.04);background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,250,255,0.4));max-width:100%}
.digit-row{display:flex;gap:var(--gap);align-items:center}
.digit-row .op-symbol{margin-right:12px;font-weight:800}
.digit-box{width:var(--box);height:var(--box);border:2px solid #E5E7EB;border-radius:var(--radius);display:inline-flex;align-items:center;justify-content:center;background:var(--card);box-shadow:0 6px 14px rgba(15,23,42,0.06);transition:box-shadow 140ms,transform 120ms}
.digit-box input{width:100%;height:100%;border:0;text-align:center;font-family:monospace;font-variant-numeric:tabular-nums;font-size:var(--digit);line-height:1;color:var(--text);background:transparent}
.digit-carry-row .digit-box{background:#FFFBF5;border-color:#FCD29A}
.digit-carry-row .digit-box input{font-size:0.85em}
.digit-rule{width:100%;border-bottom:3px solid rgba(15,23,42,0.06);height:0;margin-top:12px}
.digit-grid .answer-row{margin-top:12px}

/* Active / correct / wrong states for interactive digit boxes */
.digit-box.active{box-shadow:0 6px 18px rgba(37,99,235,0.12);transform:translateY(-4px)}
.digit-box.correct{background:linear-gradient(180deg,#f0fbf6,#ecfdf5);border-color:#34d399}
.digit-box.wrong{background:linear-gradient(180deg,#fff5f6,#fff1f2);border-color:#fca5a5}
.digit-box.disabled{opacity:0.6}

/* struck original digit for borrow visualization */
.digit-box.struck .op-num{text-decoration:line-through;opacity:0.65}
.transformed{font-size:clamp(0.8rem,3.5vw,1.1rem);color:#0f172a;display:inline-block;margin-bottom:4px}

/* Keypad popup (fixed bottom) */
.num-keypad{position:fixed;left:0;right:0;bottom:0;background:linear-gradient(180deg,#ffffff,#f8fbff);border-top:1px solid rgba(2,6,23,0.06);display:none;padding:14px 12px;box-shadow:0 -10px 30px rgba(2,6,23,0.08);z-index:99999}
.num-keypad .keys{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;max-width:420px;margin:0 auto}
.num-keypad button.key{padding:16px 0;font-size:1.15rem;border-radius:10px;border:1px solid #e6e9ef;background:#ffffff;color:#000000}
.num-keypad .controls{display:flex;gap:10px;justify-content:center;margin-top:10px}
.num-keypad .controls button{padding:10px 16px;border-radius:10px;border:none}
.num-keypad .controls button.ok-keypad{background:var(--accent);color:#ffffff}
.num-keypad .controls button.close-keypad{background:#6b7280;color:#ffffff}
.num-keypad.show{display:block}
.feedback{margin-top:8px;font-size:0.95rem}
.scoreboard{display:flex;gap:16px;justify-content:flex-start;margin-top:12px;color:var(--muted)}
footer{margin-top:16px;font-size:0.8rem;color:var(--muted);text-align:center}
@media(max-width:520px){
  .controls .row{flex-direction:column;align-items:stretch}
  .scoreboard{flex-direction:column}
}
/* 인쇄용: 모두보기 영역만 보이도록 */
@media print {
  body { background: #fff; color: #000; }
  header, .controls, .quiz, .scoreboard, footer { display: none !important; }
  .all-questions { display: block !important; }
  .container { box-shadow: none; background: #fff; }
}
/* 모두보기: 레이아웃 스타일 */
.all-questions .all-list-wrap ol.vertical { list-style: decimal; padding-left:1.2rem; }
.all-questions .all-list-wrap ol.vertical li { display:block; margin:8px 0; }

/* 모두보기: 그리드 기본 (항상 그리드) */
.all-questions .all-list-wrap {
  --print-cols: 2;
}
.all-questions .all-list-wrap ol.grid {
  display:grid;
  grid-template-columns: repeat(var(--print-cols), 1fr);
  gap:12px;
  list-style: none;
  padding:0;
  margin:0;
}
/* 각 항목: 번호 + 내용 */
.all-questions .all-list-wrap ol.grid li {
  display:flex;
  gap:10px;
  align-items:flex-start;
  box-sizing:border-box;
  padding:12px;
  border-radius:6px;
  background: #fff;
  border:1px solid #eef2f7;
  margin:0;
}
.all-questions .all-list-wrap ol.grid li .num {
  width:2.4em;
  flex:0 0 2.4em;
  text-align:right;
  padding-right:0.5rem;
  font-weight:700;
  color:var(--muted);
}
/* 내부 컨텐츠: 우측 정렬 */
.all-questions .all-list-wrap ol.grid li .content { flex:1; min-width:0; }

/* 세로형 문제: 숫자와 기호 분리. 숫자는 고정폭으로 오른쪽 정렬 */
.all-questions .prob.vertical { font-family: "Courier New", monospace; display:flex; flex-direction:column; align-items:flex-end; gap:6px; padding:6px 2px; }
.all-questions .prob.vertical { font-family: "Courier New", monospace; display:flex; flex-direction:column; align-items:flex-end; gap:6px; padding:6px 2px; }
.all-questions .prob.vertical .op-a { font-size:1.1rem; text-align:right; min-width:3ch; }
.all-questions .prob.vertical .op-b { display:flex; align-items:baseline; justify-content:flex-end; gap:0.5rem; }
.all-questions .prob.vertical .op-symbol { display:inline-block; /* operator to the left */ width:auto; padding-right:0.25rem; }
.all-questions .prob.vertical .op-num { display:inline-block; min-width:3ch; text-align:right; font-size:1.1rem; font-weight:600; }

/* Interactive (quiz) vertical problems: responsive sizing so large numbers fit mobile */
.quiz .prob.vertical { font-family: "Courier New", monospace; display:flex; flex-direction:column; align-items:flex-end; gap:6px; padding:6px 2px; width:100%; }
.quiz .prob.vertical .op-a { font-size: clamp(1.2rem, 9vw, 2.8rem); text-align:right; min-width:4ch; width:100%; }
.quiz .prob.vertical .op-b { display:flex; align-items:baseline; justify-content:flex-end; gap:0.5rem; width:100%; }
.quiz .prob.vertical .op-symbol { display:inline-block; width:auto; padding-right:0.25rem; font-size: clamp(1rem, 6vw, 1.8rem); }
.quiz .prob.vertical .op-num { display:inline-block; min-width:4ch; text-align:right; font-size: clamp(1.2rem, 9vw, 2.8rem); font-weight:700; }

/* 룰(밑줄) 너비는 content 너비에 맞춤 */
.all-questions .prob.vertical .rule { width:100%; border-bottom:2px solid rgba(17,24,39,0.12); margin-top:4px; }

/* 정답 텍스트 (가시성) */
.all-questions .prob.vertical .ans { margin-top:6px; font-weight:700; color:var(--accent); }

/* 인쇄에서도 동일 정렬 유지 */
@media print {
  .all-questions .all-list-wrap.vertical-mode ol.grid li .num { text-align:right; padding-right:0.5rem; }
  .all-questions .prob.vertical .op-num { min-width:3ch; text-align:right; }
  .all-questions .prob.vertical .rule { border-bottom-color:#000; border-bottom-width:1px; opacity:1; }
  /* 기타 인쇄 관련 기존 규칙 */
}
